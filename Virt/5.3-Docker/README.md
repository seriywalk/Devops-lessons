# Домашнее задание к занятию "3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

## Задача 1

Сценарий выполения задачи:

создайте свой репозиторий на https://hub.docker.com;
выберете любой образ, который содержит веб-сервер Nginx;
создайте свой fork образа;
реализуйте функциональность: запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

**Решение**
1. Создал учетную запись на hub.docker.com. 
На компьютере нужно войти в свою учетку используя команду `docker login`

2. Создал каталог для работы _Docker_. В нем создал файл _index.html_ с HTML-кодом по заданию. Создал файл _Dockerfile_ c инструкциями

`FROM nginx`

`COPY index.html /usr/share/nginx/html/index.html`

3. Скачал образ nginx 

`$docker pull nginx`

4. Создал форк образа nginx.
`$docker build .` Точка в конце показывает, что докер будет использовать текущий каталог и стандартный файл _Dockerfile_. Образ создается без имени, только с image-id.

`$docker images
REPOSITORY   TAG       IMAGE ID       CREATED              SIZE`

`<none>       <none>    9bd81f8b7b15   About a minute ago   142MB`

`nginx        latest    a99a39d070bf   2 weeks ago          142MB`
 
Прилепить ему имя можно командой `docker tag 9bd81f8b7b15 sirwalknet/mynginx:v2`. Тэг v2 из-за того, что апостроф в файле index.html читается с ошибкой, заменил его коснтрукцией `I am`

5. Проверить работу контейнера можно командой `docker run -p 80:80 sirwalknet/mynginx:v2`

6. Теперь форк можно отправить в [мой репозиторий](https://hub.docker.com/layers/sirwalknet/mynginx/v2/images/sha256-8e13886fc22e812bf530f7d5109f5a5aca509a8a28ec3fc2f9f4c248faec53cd?context=repo)

`docker push sirwalknet/mynginx:v2`

## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос: "Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

Высоконагруженное монолитное java веб-приложение;
Nodejs веб-приложение;
Мобильное приложение c версиями для Android и iOS;
Шина данных на базе Apache Kafka;
Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
Мониторинг-стек на базе Prometheus и Grafana;
MongoDB, как основное хранилище данных для java-приложения;
Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.

**Решение**

Высоконагруженное монолитное java веб-приложение;

_Докер лучше не использовать, монолитное приложение обычно тяжеловесное. Подойдет вирутальная или физическая машина в зависимости от бюджета_ 

Nodejs веб-приложение;

_Считаю, что самый лучший выбор использование Докер. Такое приложение Легко развертывать, масштабировать, не отнимает много ресурсов._

Мобильное приложение c версиями для Android и iOS;

_Для тестирования разных платформ лучше использовать виртуальные машины._ 

Шина данных на базе Apache Kafka;

_Читал, что для Apache Kafka уже имеется много готовых Докер контейнеров. Удобно изолировать приложения._  

Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;

_Также удобно разворачивать в Докере, так как есть готовые образы, не требует много времени на развертывание._

Мониторинг-стек на базе Prometheus и Grafana;

_Также удобно разворачивать в Докере, так как есть готовые образы. Приложения для мониторинга практически не нуждаются в выделении дискового пространства, так как не хранят данные_

MongoDB, как основное хранилище данных для java-приложения;

_База данных как правило требует выделения значительныъ серверных мощностей, обеспечение отказоустойчивости. Подойдет вирутальная или физическая машина в зависимости от бюджета_

Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.

_Также удобно разворачивать в Докере. При наличии публичных репозиториев организация частных docker registry обычно связана с требованиями по безопасности и ограничениями по ресурсам._ 

## Задача 3

Запустите первый контейнер из образа centos c любым тэгом в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера;
Запустите второй контейнер из образа debian в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера;
Подключитесь к первому контейнеру с помощью docker exec и создайте текстовый файл любого содержания в /data;
Добавьте еще один файл в папку /data на хостовой машине;
Подключитесь во второй контейнер и отобразите листинг и содержание файлов в /data контейнера.


## Задача 4 (*)

Воспроизвести практическую часть лекции самостоятельно.

Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.

